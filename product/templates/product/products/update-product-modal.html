<div class="modal fade" id="updateModal{{obj.id}}" tabindex="-1" aria-labelledby="updateModal{{obj.id}}" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateModal{{obj.id}}">Update Product</h5>
                <button type="button" class="btn btn-warning" data-bs-dismiss="modal" aria-label="Close"><i
                        class="fa-solid fa-xmark"></i></button>
            </div>
            <form action="" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="modal-body row g-3">
                        <!-- Product Category -->
                        <div class="col-12">
                            <div class="form-floating">
                                <select id="product-category" class="form-select" name="category">
                                    <option value="{{ obj.category.id }}" selected>{{ obj.category.name }}</option>
                                {% for choice in form.category.field.choices %}
                                    {% if choice.0 != obj.category.id %}
                                        <option value="{{ choice.0 }}">{{ choice.1 }}</option>
                                    {% endif %}
                                {% endfor %}
                                  </select>
                                  
                                  <label for="product-category">Category</label>
                            </div>
                          </div>
                        <!-- Product Name -->
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="product-name" name="name" value="{{obj.name}}">
                                <label for="product-name">Name</label>
                            </div>
                        </div>
                        <!-- Product Ref. -->
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="product-ref" name="ref" value="{{obj.ref}}">
                                <label for="product-ref">Ref.</label>
                            </div>
                        </div>
                        <!-- Product Image -->
                        <div class="input-group">
                            <img src="{{ obj.product_img.url }}" alt="Product Image" class="img-thumbnail" width="100">
                            <input type="file" class="form-control" id="product-img" name="product_img">
                          </div>
                        <!-- Product Description -->
                        <div class="col-12">
                          <div class="form-floating">
                            <textarea class="form-control" placeholder="Describe the Product" id="product-description" name="description" style="height: 100px">{{obj.description}}</textarea>
                            <label for="product-description">Description</label>
                          </div>
                        </div>
                        <!-- Product Price -->
                        <div class="col-md-4">
                            <div class="input-group mb-3">
                                <div class="form-floating">
                                    <input type="text" class="form-control" id="product-price" name="price" value="{{obj.price}}" aria-label="Euros">
                                    <label for="product-price">Price</label>
                                </div>
                                <span class="input-group-text">â‚¬</span>
                            </div>
                        </div>
                        <!-- Product Discount -->
                        <div class="col-md-4">
                            <div class="input-group mb-3">
                                <div class="form-floating">
                                    <input type="text" class="form-control" id="product-discount" name="discount" value="{{obj.discount}}" aria-label="%">
                                    <label for="product-discount">Discount</label>
                                </div>
                                <span class="input-group-text">%</span>
                            </div>
                        </div>
                        <!-- Product Measurement -->
                        <div class="col-md-4">
                            <div class="form-floating">
                                <select id="product-measurement" class="form-select" name="measurement">
                                    <!-- Correct initial value using measurement ID -->
                                    <option value="{{ obj.measurement.id }}" selected>{{ obj.measurement.measure }}</option>
                                    
                                    {% for choice in form.measurement.field.choices %}
                                        <!-- Compare against MEASUREMENT ID, not category ID -->
                                        {% if choice.0 != obj.measurement.id %}
                                            <option value="{{ choice.0 }}">{{ choice.1 }}</option>
                                        {% endif %}
                                    {% endfor %}
                                </select>
                                <label for="product-measurement">Measurement</label>
                            </div>
                        </div>
                        <!-- Product Active -->
                        <div class="col-12">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="product-active" name="active" {% if obj.active %}checked{% endif %}>
                              <label class="form-check-label" for="product-active">
                                Is Active?
                              </label>
                            </div>
                          </div>
                </div>
                <div class="modal-footer col-12">
                    <button type="submit" class="btn btn-warning border-2 text-bottom p-2">Confirmar<span
                            class="badge bg-dark mx-2"><i class="fa-solid fa-check"></i></span></button>
                </div>
            </form>
        </div>
    </div>
</div>