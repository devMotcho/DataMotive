{% extends 'main.html' %}
{% block title %}- Supplier {{obj.transaction_id}} {%endblock title %}

{% block content %} 

{% include 'transactions/purchase/update-purchase-modal.html' %}

<main class="content p-2">
  <div class="container-fluid">
    <!-- Title + Action -->
    <div class="row">
      <div class="col">
        <h4 class="title">Transaction {{obj.transaction_id}}</h4>
      </div>
      <div class="col">
        <div class="action text-end">
          <button
            type="button"
            class="btn btn-warning"
            data-bs-toggle="modal"
            data-bs-target="#updateModal{{obj.id}}">
            <i class="fa-solid fa-pen-to-square"></i>
          </button>
        </div>
      </div>
    </div>
    <!-- Title + Action End -->
    <hr />
    <!-- Supplier Information Card -->
    <div class="row">
      <div class="col d-flex">
        <div class="card flex-fill border-0">
          <div class="card-body p-0 d-flex flex-fill">
            <div class="row g-0 w-100">
              <div class="col pt-4">
                <div class="p-3 m-1">
                  <h4 class="mt-2 p-2 text-center">
                    <span class="badge text-bg-danger"
                      >Purchase</span
                    >
                    <span class="badge text-bg-warning"
                      >{{obj.product.name}}</span
                    >
                    <span class="badge text-bg-success"
                      >{{obj.product.measurement}}</span
                    >
                    <span class="badge text-bg-secondary"
                      >{{obj.product.category}}</span
                    >
                    <span class="badge text-bg-info"
                      >{{obj.transaction_date}}</span
                    >
                  </h4>
                  <div class="container pt-4">
                    <table
                      class="table table-striped table-bordered border-dark">
                      <thead>
                        <tr class="table-dark text-white text-center">
                          <th scope="col">Supplier</th>
                          <th scope="col">Entity Type</th>
                          <th scope="col">Quantity</th>
                          <th scope="col">Purchase Price</th>
                          <th scope="col">Sold Price</th>
                          <th scope="col">Profit</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr class="text-center">
                          <td>{{obj.supplier.name}}</td>
                          <td>{{obj.supplier.entity}}</td>
                          <td><b>{{obj.quantity}}</b></td>
                          <td><b>{{obj.final_price}}€</b></td>
                          <td><b>{{sold_product_for}}€</b></td>
                          
                          {% if profit > 0 %}
                          <td class="text-success"><b>{{profit}}€</b></td>
                          {% else %}
                          <td class="text-danger"><b>{{profit}}€</b></td>
                          {% endif %}
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="card text-bg-dark mb-3">
                    <div class="card-header">Note:</div>
                    <div class="card-body">
                      <!-- Add note in model -->
                      {{obj.note}}
                      <p class="card-text"></p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4 align-self-center text-end">
                <img
                  src="{{obj.product.product_img.url}}"
                  class="img-fluid illustration-img"
                  alt="{{obj.product.name}} image" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Supplier Information Card -->
  </div>
</main>

{% endblock content %}
